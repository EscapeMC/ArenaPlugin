package com.github.escapemc.arenaplugin;

import java.util.logging.Logger;

import org.bukkit.ChatColor;
import org.bukkit.entity.Player;
import org.bukkit.plugin.PluginDescriptionFile;
import org.bukkit.plugin.java.JavaPlugin;

import com.github.escapemc.arenaplugin.bases.Team;
import com.github.escapemc.arenaplugin.commands.CommandSetSpawn;
import com.github.escapemc.arenaplugin.commands.CommandTeam;

public class Main extends JavaPlugin {

	PluginDescriptionFile pdfFile = getDescription();
	Logger logger = getLogger();
	
	public void onEnable() {
		
		logger.info("Enabling " + pdfFile.getName() + " Version - " + pdfFile.getVersion() + " Made By " + pdfFile.getAuthors());
		registerCommands();
		Team.clearTeams();
		
	}
	
	public void onDisable() {
		
		logger.info("Disabling " + pdfFile.getName() + " Version - " + pdfFile.getVersion() + " Made By " + pdfFile.getAuthors());
		Team.clearTeams();
		
	}
	
	private void registerCommands() {
		
		getCommand("arena_setspawn").setExecutor(new CommandSetSpawn());
		getCommand("arena_team").setExecutor(new CommandTeam());
		
	}
	
	public void saveConfigSpawnBlue(Player p) {
		
		getConfig().set("spawn.blue.world", p.getLocation().getWorld());
		getConfig().set("spawn.blue.x", p.getLocation().getX());
		getConfig().set("spawn.blue.y", p.getLocation().getY());
		getConfig().set("spawn.blue.z", p.getLocation().getZ());
		getConfig().set("spawn.blue.pitch", p.getLocation().getPitch());
		getConfig().set("spawn.blue.yaw", p.getLocation().getYaw());
		saveConfig();
		p.sendMessage(ChatColor.DARK_PURPLE + "(Pst, also saved to config file!)");
		
	}

	public void saveConfigSpawnRed(Player p) {
		
		getConfig().set("spawn.red.world", p.getLocation().getWorld());
		getConfig().set("spawn.red.x", p.getLocation().getX());
		getConfig().set("spawn.red.y", p.getLocation().getY());
		getConfig().set("spawn.red.z", p.getLocation().getZ());
		getConfig().set("spawn.red.pitch", p.getLocation().getPitch());
		getConfig().set("spawn.red.yaw", p.getLocation().getYaw());
		saveConfig();
		p.sendMessage(ChatColor.DARK_PURPLE + "(Pst, also saved to config file!)");
		
	}

}
